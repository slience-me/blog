<!DOCTYPE html> <html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> <title>Linux｜ubuntu多版本cuda如何指定cuda版本 &mdash; Slience_me的博客</title> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/vendor/primer-css/css/primer.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/css/components/collection.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/css/components/repo-card.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/css/sections/repo-list.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/css/components/boxed-group.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/css/globals/common.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/css/globals/responsive.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/css/posts/index.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/vendor/octicons/octicons/octicons.css"> <link rel="stylesheet" href=" https://cdn.jsdelivr.net/npm/@docsearch/css@3 "/> <link rel="stylesheet" href="https://mazhuang.org/rouge-themes/dist/github.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/vendor/share.js/dist/css/share.min.css"> <link rel="canonical" href="https://blog.slienceme.cn/2024/06/21/ubuntu%E5%A4%9A%E7%89%88%E6%9C%ACcuda%E5%A6%82%E4%BD%95%E6%8C%87%E5%AE%9Acuda%E7%89%88%E6%9C%AC/"> <link rel="alternate" type="application/atom+xml" title="Slience_me的博客" href="https://blog.slienceme.cn/feed.xml"> <link rel="shortcut icon" href="https://blog.slienceme.cn/favicon.ico"> <meta property="og:title" content="Linux｜ubuntu多版本cuda如何指定cuda版本"> <meta name="keywords" content="Linux, CUDA"> <meta name="og:keywords" content="Linux, CUDA"> <meta name="description" content=""> <meta name="og:description" content=""> <meta property="og:url" content="https://blog.slienceme.cn/2024/06/21/ubuntu%E5%A4%9A%E7%89%88%E6%9C%ACcuda%E5%A6%82%E4%BD%95%E6%8C%87%E5%AE%9Acuda%E7%89%88%E6%9C%AC/"> <meta property="og:site_name" content="Slience_me的博客"> <meta property="og:type" content="article"> <meta property="og:locale" content="zh_CN" /> <meta property="article:published_time" content="2024-06-21"> <meta name="google-site-verification" content="2feHjT1GNs1Yi2JQfOtdYx7d048naG_-cMwZaDAopIA" /> <script src="https://blog.slienceme.cn/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://blog.slienceme.cn/assets/js/main.js"></script> </head> <body class="" data-mz=""> <header class="site-header"> <div class="container"> <h1><a href="https://blog.slienceme.cn/" title="Slience_me的博客"><span class="octicon octicon-mark-github"></span> Slience_me的博客</a></h1> <button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <nav class="site-header-nav" role="navigation"> <a href="https://blog.slienceme.cn/" class="site-header-nav-item" target="" title="首页">首页</a> <a href="https://blog.slienceme.cn/categories/" class="site-header-nav-item" target="" title="分类">分类</a> <a href="https://blog.slienceme.cn/archives/" class="mobile-hidden site-header-nav-item" target="" title="归档">归档</a> <a href="https://blog.slienceme.cn/open-source/" class="mobile-hidden site-header-nav-item" target="" title="开源">开源</a> <a href="https://blog.slienceme.cn/fragments/" class="site-header-nav-item" target="" title="片段">片段</a> <a href="https://blog.slienceme.cn/wiki/" class="site-header-nav-item" target="" title="维基">维基</a> <a href="https://blog.slienceme.cn/links/" class="mobile-hidden site-header-nav-item" target="" title="链接">链接</a> <a href="https://blog.slienceme.cn/about/" class="site-header-nav-item" target="" title="关于">关于</a> <a class="mobile-hidden" href="https://blog.slienceme.cn/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a> </nav> </div> </header> <section class="collection-head small geopattern" data-pattern-id="Linux｜ubuntu多版本"> <div class="container"> <div class="columns"> <div class="column three-fourths"> <div class="collection-title"> <h1 class="collection-header">Linux｜ubuntu多版本cuda如何指定cuda版本</h1> <div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2024/06/21 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://blog.slienceme.cn/categories/#Linux" title="Linux">Linux</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 2219 字，约 7 分钟 </span> </div> </div> </div> <div class="column one-fourth mobile-hidden"> <div class="collection-title"> </div> </div> </div> </div> </section> <section class="container content"> <div class="columns"> <div class="column three-fourths" > <article class="article-content markdown-body"> <p><img src="https://blog.slienceme.cn/images/posts/logo_slienceme3.png" alt="img" /></p> <p>本文作者： <a href="https://slienceme.cn/">slience_me</a></p> <hr /> <h1 id="ubuntu多版本cuda如何指定cuda版本">ubuntu多版本cuda如何指定cuda版本</h1> <h2 id="1-关于cuda设置">1. 关于cuda设置</h2> <p>在 Ubuntu 系统上选择和管理 CUDA 的多个版本可以通过以下步骤进行：</p> <h3 id="11-查看当前安装的-cuda-版本">1.1 查看当前安装的 CUDA 版本</h3> <p>你可以通过以下命令查看当前安装的 CUDA 版本：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nvcc <span class="nt">--version</span>
</code></pre></div></div> <h3 id="12-下载并安装所需的-cuda-版本">1.2 下载并安装所需的 CUDA 版本</h3> <p>你可以从 <a href="https://developer.nvidia.com/cuda-downloads">NVIDIA CUDA Toolkit 下载页面</a> 下载你需要的 CUDA 版本。选择你的操作系统（Linux）、架构（x86_64）、发行版（Ubuntu）和版本，然后按照提示下载并安装。</p> <h3 id="13-设置环境变量">1.3 设置环境变量</h3> <p>每个 CUDA 版本都会安装在不同的目录中，例如 <code class="language-plaintext highlighter-rouge">/usr/local/cuda-10.1</code>, <code class="language-plaintext highlighter-rouge">/usr/local/cuda-10.2</code> 等。你可以通过设置环境变量 <code class="language-plaintext highlighter-rouge">CUDA_HOME</code> 和修改 <code class="language-plaintext highlighter-rouge">PATH</code> 来切换不同的 CUDA 版本。</p> <p>以下是一个示例脚本，可以根据你需要的 CUDA 版本进行修改：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 切换到 CUDA 10.1</span>
<span class="nb">export </span><span class="nv">CUDA_HOME</span><span class="o">=</span>/usr/local/cuda-10.1
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$CUDA_HOME</span>/bin:<span class="nv">$PATH</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$CUDA_HOME</span>/lib64:<span class="nv">$LD_LIBRARY_PATH</span>

<span class="c"># 切换到 CUDA 10.2</span>
<span class="c"># export CUDA_HOME=/usr/local/cuda-10.2</span>
<span class="c"># export PATH=$CUDA_HOME/bin:$PATH</span>
<span class="c"># export LD_LIBRARY_PATH=$CUDA_HOME/lib64:$LD_LIBRARY_PATH</span>
</code></pre></div></div> <p>你可以将这个脚本添加到你的 <code class="language-plaintext highlighter-rouge">~/.bashrc</code> 或 <code class="language-plaintext highlighter-rouge">~/.zshrc</code> 文件中，或者每次需要切换 CUDA 版本时手动运行这个脚本。</p> <h3 id="14-验证切换">1.4 验证切换</h3> <p>切换 CUDA 版本后，可以运行以下命令来验证切换是否成功：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nvcc <span class="nt">--version</span>
</code></pre></div></div> <p>这个命令将显示当前使用的 CUDA 版本。</p> <h3 id="15-安装对应的-nvidia-驱动程序">1.5 安装对应的 NVIDIA 驱动程序</h3> <p>确保你安装了与所需 CUDA 版本兼容的 NVIDIA 驱动程序。如果需要更新或切换驱动程序，可以使用以下命令：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>ubuntu-drivers devices
<span class="nb">sudo </span>ubuntu-drivers autoinstall
</code></pre></div></div> <p>或者你也可以从 <a href="https://www.nvidia.com/Download/index.aspx">NVIDIA 驱动程序下载页面</a> 手动下载并安装所需的驱动程序。</p> <p>通过以上步骤，你可以在 Ubuntu 系统上管理和切换多个 CUDA 版本。</p> <h2 id="2-设置环境变量">2. 设置环境变量</h2> <p>在 Ubuntu 上修改环境变量可以通过编辑 <code class="language-plaintext highlighter-rouge">~/.bashrc</code> 或 <code class="language-plaintext highlighter-rouge">~/.zshrc</code> 文件来实现，具体取决于你使用的是 Bash 还是 Zsh。以下是详细步骤：</p> <h3 id="21-打开终端">2.1 打开终端</h3> <h3 id="22-编辑-bashrc-或-zshrc">2.2 编辑 <code class="language-plaintext highlighter-rouge">~/.bashrc</code> 或 <code class="language-plaintext highlighter-rouge">~/.zshrc</code></h3> <p>如果你使用的是 Bash，编辑 <code class="language-plaintext highlighter-rouge">~/.bashrc</code> 文件：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano ~/.bashrc
</code></pre></div></div> <p>如果你使用的是 Zsh，编辑 <code class="language-plaintext highlighter-rouge">~/.zshrc</code> 文件：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano ~/.zshrc
</code></pre></div></div> <h3 id="23-添加环境变量">2.3 添加环境变量</h3> <p>在文件末尾添加以下行来设置 CUDA 环境变量。例如，假设你有两个 CUDA 版本：10.1 和 10.2，你可以按以下方式添加：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 设置 CUDA 10.1 环境变量</span>
<span class="nb">export </span><span class="nv">CUDA_HOME</span><span class="o">=</span>/usr/local/cuda-10.1
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$CUDA_HOME</span>/bin:<span class="nv">$PATH</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$CUDA_HOME</span>/lib64:<span class="nv">$LD_LIBRARY_PATH</span>
</code></pre></div></div> <p>如果你需要切换到 CUDA 10.2，则可以将上述代码注释掉，并添加如下代码：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 设置 CUDA 10.2 环境变量</span>
<span class="c"># export CUDA_HOME=/usr/local/cuda-10.1</span>
<span class="c"># export PATH=$CUDA_HOME/bin:$PATH</span>
<span class="c"># export LD_LIBRARY_PATH=$CUDA_HOME/lib64:$LD_LIBRARY_PATH</span>

<span class="nb">export </span><span class="nv">CUDA_HOME</span><span class="o">=</span>/usr/local/cuda-10.2
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$CUDA_HOME</span>/bin:<span class="nv">$PATH</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$CUDA_HOME</span>/lib64:<span class="nv">$LD_LIBRARY_PATH</span>
</code></pre></div></div> <p>你也可以使用条件语句来更灵活地切换 CUDA 版本：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 根据需要选择 CUDA 版本</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$CUDA_VERSION</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"10.1"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">export </span><span class="nv">CUDA_HOME</span><span class="o">=</span>/usr/local/cuda-10.1
<span class="k">elif</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$CUDA_VERSION</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"10.2"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">export </span><span class="nv">CUDA_HOME</span><span class="o">=</span>/usr/local/cuda-10.2
<span class="k">fi
</span><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$CUDA_HOME</span>/bin:<span class="nv">$PATH</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$CUDA_HOME</span>/lib64:<span class="nv">$LD_LIBRARY_PATH</span>
</code></pre></div></div> <p>然后在需要切换版本时设置 <code class="language-plaintext highlighter-rouge">CUDA_VERSION</code> 环境变量，例如：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">CUDA_VERSION</span><span class="o">=</span>10.1
<span class="nb">source</span> ~/.bashrc  <span class="c"># 或者 source ~/.zshrc</span>
</code></pre></div></div> <h3 id="24-保存并退出">2.4 保存并退出</h3> <p>编辑完成后，按 <code class="language-plaintext highlighter-rouge">Ctrl+O</code> 保存文件，然后按 <code class="language-plaintext highlighter-rouge">Ctrl+X</code> 退出编辑器。</p> <h3 id="25-使更改生效">2.5 使更改生效</h3> <p>运行以下命令使更改生效：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ~/.bashrc  <span class="c"># 如果使用的是 Bash</span>
<span class="nb">source</span> ~/.zshrc   <span class="c"># 如果使用的是 Zsh</span>
</code></pre></div></div> <h3 id="26-验证更改">2.6 验证更改</h3> <p>可以通过以下命令验证环境变量是否设置正确：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="nv">$CUDA_HOME</span>
nvcc <span class="nt">--version</span>
</code></pre></div></div> <p>通过这些步骤，你可以方便地修改和管理环境变量，以切换不同的 CUDA 版本。</p> <div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"> <h3>文档信息</h3> <ul> <li>本文作者：<a href="https://blog.slienceme.cn" target="_blank">slience_me</a></li> <li>本文链接：<a href="https://blog.slienceme.cn/2024/06/21/ubuntu%E5%A4%9A%E7%89%88%E6%9C%ACcuda%E5%A6%82%E4%BD%95%E6%8C%87%E5%AE%9Acuda%E7%89%88%E6%9C%AC/" target="_blank">https://blog.slienceme.cn/2024/06/21/ubuntu%E5%A4%9A%E7%89%88%E6%9C%ACcuda%E5%A6%82%E4%BD%95%E6%8C%87%E5%AE%9Acuda%E7%89%88%E6%9C%AC/</a></li> <li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">创意共享3.0许可证</a>）</li> </ul> </div> </article> <div class="share"> <div class="share-component" data-disabled='qq,facebook'></div> </div> <div class="comment"> <script src="https://giscus.app/client.js" data-repo="slience-me/blog-comments" data-repo-id="R_kgDOKr27jA" data-category="Announcements" data-category-id="DIC_kwDOKr27jM4CnWMe" data-mapping="title" data-strict="1" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" async> </script> </div> </div> <div class="column one-fourth"> <h3>Search</h3> <div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"> </div> <ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul> <script src="https://blog.slienceme.cn/assets/js/simple-jekyll-search.min.js"></script> <script src=" https://cdn.jsdelivr.net/npm/@docsearch/js@3 "></script> <script type="text/javascript"> docsearch({ appId: "8W5T6R2WWG", apiKey: "e56e511c7c9f85e2c97e2817664aafb2", indexName: "doc", container: "#search_box", debug: false }); // SimpleJekyllSearch({ // searchInput: document.getElementById('search_box'), // resultsContainer: document.getElementById('search_results'), // // json: 'https://blog.slienceme.cn/assets/search_data.json?v=1740710267', // // searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', // noResultsText: 'No results found', // limit: 10, // fuzzy: false, // exclude: ['Welcome'] // }) </script> <h3 class="post-directory-title mobile-hidden">Table of Contents</h3> <div id="post-directory-module" class="mobile-hidden"> <section class="post-directory"> <dl></dl> </section> </div> <script src="https://blog.slienceme.cn/assets/js/jquery.toc.js"></script> </div> </div> </section> <footer class="container"> <div class="site-footer" role="contentinfo"> <div class="copyright left mobile-block"> <div style="display: flex;align-items: center;justify-content: center;"> <img src="/images/logo/logo.png" class="w-full" style="height: 10px;width: 10px;" alt="logo" />;"> <p> <a href="https://beian.mps.gov.cn/" rel="noreferrer" target="_blank">冀公网安备13102202000626</a> | <a href="https://beian.miit.gov.cn/" target="_blank" rel="noreferrer">津ICP备2024026565号-1</a> </p> </div> <p style="display: flex;align-items: center;justify-content: center;"> Copyright © 2019-present slience_me </p> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a> </div> <ul class="site-footer-links right mobile-hidden"> <li> <a href="javascript:window.scrollTo(0,0)" >TOP</a> </li> </ul> <br/> <script defer src="https://vercount.one/js"></script> <div class="mobile-hidden" style="margin-top:8px"> <span id="busuanzi_container_site_pv" style="display:none"> 本站访问量<span id="busuanzi_value_site_pv"></span>次 </span> <span id="busuanzi_container_site_uv" style="display:none"> / 本站访客数<span id="busuanzi_value_site_uv"></span>人 </span> <span id="busuanzi_container_page_pv" style="display:none"> / 本页访问量<span id="busuanzi_value_page_pv"></span>次 / 统计始于2024-12-01 </span> </div> </div> </footer> <div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a> </div> <script src="https://blog.slienceme.cn/assets/vendor/share.js/dist/js/share.min.js"></script> <script src="https://blog.slienceme.cn/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script> </body> </html>
