<!DOCTYPE html> <html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> <title>Linux｜服务器系统重装&SSH&xrdp&CUDA &mdash; Slience_me的博客</title> <link rel="stylesheet" href="https://slienceme.cn/assets/vendor/primer-css/css/primer.css"> <link rel="stylesheet" href="https://slienceme.cn/assets/css/components/collection.css"> <link rel="stylesheet" href="https://slienceme.cn/assets/css/components/repo-card.css"> <link rel="stylesheet" href="https://slienceme.cn/assets/css/sections/repo-list.css"> <link rel="stylesheet" href="https://slienceme.cn/assets/css/components/boxed-group.css"> <link rel="stylesheet" href="https://slienceme.cn/assets/css/globals/common.css"> <link rel="stylesheet" href="https://slienceme.cn/assets/css/globals/responsive.css"> <link rel="stylesheet" href="https://slienceme.cn/assets/css/posts/index.css"> <link rel="stylesheet" href="https://slienceme.cn/assets/vendor/octicons/octicons/octicons.css"> <link rel="stylesheet" href="https://mazhuang.org/rouge-themes/dist/github.css"> <link rel="stylesheet" href="https://slienceme.cn/assets/vendor/share.js/dist/css/share.min.css"> <link rel="canonical" href="https://slienceme.cn/2024/10/24/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E7%BB%9F%E9%87%8D%E8%A3%85&SSH&xrdp&cuda/"> <link rel="alternate" type="application/atom+xml" title="Slience_me的博客" href="https://slienceme.cn/feed.xml"> <link rel="shortcut icon" href="https://slienceme.cn/favicon.ico"> <meta property="og:title" content="Linux｜服务器系统重装&SSH&xrdp&CUDA"> <meta name="keywords" content="Linux, CUDA, SSH, xrdp"> <meta name="og:keywords" content="Linux, CUDA, SSH, xrdp"> <meta name="description" content=""> <meta name="og:description" content=""> <meta property="og:url" content="https://slienceme.cn/2024/10/24/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E7%BB%9F%E9%87%8D%E8%A3%85&SSH&xrdp&cuda/"> <meta property="og:site_name" content="Slience_me的博客"> <meta property="og:type" content="article"> <meta property="og:locale" content="zh_CN" /> <meta property="article:published_time" content="2024-10-24"> <meta name="google-site-verification" content="2feHjT1GNs1Yi2JQfOtdYx7d048naG_-cMwZaDAopIA" /> <script src="https://slienceme.cn/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://slienceme.cn/assets/js/main.js"></script> </head> <body class="" data-mz=""> <header class="site-header"> <div class="container"> <h1><a href="https://slienceme.cn/" title="Slience_me的博客"><span class="octicon octicon-mark-github"></span> Slience_me的博客</a></h1> <button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <nav class="site-header-nav" role="navigation"> <a href="https://slienceme.cn/" class="site-header-nav-item" target="" title="首页">首页</a> <a href="https://slienceme.cn/categories/" class="site-header-nav-item" target="" title="分类">分类</a> <a href="https://slienceme.cn/archives/" class="mobile-hidden site-header-nav-item" target="" title="归档">归档</a> <a href="https://slienceme.cn/open-source/" class="mobile-hidden site-header-nav-item" target="" title="开源">开源</a> <a href="https://slienceme.cn/fragments/" class="site-header-nav-item" target="" title="片段">片段</a> <a href="https://slienceme.cn/wiki/" class="site-header-nav-item" target="" title="维基">维基</a> <a href="https://slienceme.cn/links/" class="mobile-hidden site-header-nav-item" target="" title="链接">链接</a> <a href="https://slienceme.cn/about/" class="site-header-nav-item" target="" title="关于">关于</a> <a class="mobile-hidden" href="https://slienceme.cn/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a> </nav> </div> </header> <section class="collection-head small geopattern" data-pattern-id="Linux｜服务器系统重装&S"> <div class="container"> <div class="columns"> <div class="column three-fourths"> <div class="collection-title"> <h1 class="collection-header">Linux｜服务器系统重装&SSH&xrdp&CUDA</h1> <div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2024/10/24 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://slienceme.cn/categories/#Linux" title="Linux">Linux</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 4994 字，约 15 分钟 </span> </div> </div> </div> <div class="column one-fourth mobile-hidden"> <div class="collection-title"> </div> </div> </div> </div> </section> <section class="container content"> <div class="columns"> <div class="column three-fourths" > <article class="article-content markdown-body"> <p><img src="https://i-blog.csdnimg.cn/blog_migrate/e9a9ce64f17b96904b03f129f0317e3d.png" alt="在这里插入图片描述" /></p> <p>本文作者： <a href="https://slienceme.cn/">slience_me</a></p> <hr /> <h1 id="ubuntu系统重装操作合集">Ubuntu系统重装操作合集</h1> <hr /> <h2 id="11-系统安装">1.1 系统安装：</h2> <p>https://blog.csdn.net/Flag_ing/article/details/121908340</p> <p>/boot : 1G 1024MB 主分区。系统的boot启动引导项安装位置</p> <p>efi: 1G 主分区</p> <p>/ : 剩余 主分区。根目录，所有目录的根节点，其下包含很多子目录，如/usr /tmp等</p> <p>/home : 2T 逻辑分区。一般放置自己的数据</p> <p>swap : 64G 65536MB 逻辑分区。交换空间，一般是物理内存的1~2倍就行了</p> <hr /> <h2 id="12-安装openssh-server">1.2 安装openssh-server</h2> <blockquote> <p>在Ubuntu上安装和配置SSH服务器非常简单。以下是详细的步骤：</p> <h3 id="更新系统包">更新系统包</h3> <p>在安装任何新软件之前，最好更新现有的软件包，以确保你获得最新的版本。打开终端并运行以下命令：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
</code></pre></div> </div> <h3 id="安装openssh服务器">安装OpenSSH服务器</h3> <p>Ubuntu使用<code class="language-plaintext highlighter-rouge">openssh-server</code>作为SSH服务器。可以使用以下命令进行安装：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>openssh-server
</code></pre></div> </div> <h3 id="检查ssh服务的状态">检查SSH服务的状态</h3> <p>安装完成后，可以检查SSH服务是否正在运行：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl status ssh
</code></pre></div> </div> <p>如果显示类似以下内容，说明SSH服务器已成功启动并正在运行：</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>● ssh.service - OpenBSD Secure Shell server
  Loaded: loaded (/lib/systemd/system/ssh.service; enabled; vendor preset: enabled)
  Active: active (running) since ...
</code></pre></div> </div> <p>如果SSH服务未运行，可以使用以下命令启动它：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl start ssh
</code></pre></div> </div> <p>要确保每次启动系统时SSH自动启动，可以使用：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl <span class="nb">enable </span>ssh
</code></pre></div> </div> <h3 id="配置防火墙以允许ssh">配置防火墙以允许SSH</h3> <p>如果你使用<code class="language-plaintext highlighter-rouge">ufw</code>防火墙，可能需要显式允许SSH流量。运行以下命令：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>ufw allow ssh
</code></pre></div> </div> <h3 id="测试ssh连接">测试SSH连接</h3> <p>在本地计算机或其他设备上，可以通过以下命令测试连接到你的Ubuntu系统：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh username@server_ip_address
</code></pre></div> </div> <p>将<code class="language-plaintext highlighter-rouge">username</code>替换为Ubuntu系统的用户名，将<code class="language-plaintext highlighter-rouge">server_ip_address</code>替换为该系统的IP地址。</p> <p>你可以通过以下命令查找服务器的IP地址：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip a
</code></pre></div> </div> <h3 id="配置ssh可选">配置SSH（可选）</h3> <p>默认情况下，SSH配置文件位于<code class="language-plaintext highlighter-rouge">/etc/ssh/sshd_config</code>。可以通过编辑该文件来更改默认设置，例如修改默认的SSH端口、禁用密码认证、启用密钥认证等。</p> <p>编辑文件：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nano /etc/ssh/sshd_config
</code></pre></div> </div> <p>修改后，重新加载SSH服务以应用更改：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart ssh
</code></pre></div> </div> <p>至此，Ubuntu上的SSH服务器已经成功安装并运行。</p> </blockquote> <h2 id="13-安装远程连接桌面">1.3 安装远程连接桌面</h2> <blockquote> <p>在Ubuntu上安装并配置远程桌面可以通过多种方式实现，最常见的选项是使用<code class="language-plaintext highlighter-rouge">xrdp</code>与桌面环境结合，让Windows用户通过远程桌面连接（RDP协议）访问Ubuntu桌面。以下是安装和配置远程桌面的详细步骤：</p> <h3 id="安装桌面环境如果需要">安装桌面环境（如果需要）</h3> <p>如果你使用的是Ubuntu Server或最小化安装版本，你需要首先安装一个桌面环境。最常用的桌面环境是<code class="language-plaintext highlighter-rouge">GNOME</code>，它是Ubuntu默认的桌面环境。你可以通过以下命令来安装完整的Ubuntu桌面：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ubuntu-desktop
</code></pre></div> </div> <p>如果你希望安装较轻量的桌面环境，比如<code class="language-plaintext highlighter-rouge">Xfce</code>，可以执行以下命令：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>xfce4
</code></pre></div> </div> <h3 id="安装xrdp">安装<code class="language-plaintext highlighter-rouge">xrdp</code></h3> <p>安装<code class="language-plaintext highlighter-rouge">xrdp</code>（远程桌面协议服务器），它允许你通过RDP协议远程连接到Ubuntu桌面。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>xrdp
</code></pre></div> </div> <h3 id="启动和配置xrdp">启动和配置<code class="language-plaintext highlighter-rouge">xrdp</code></h3> <p>安装完成后，启动并启用<code class="language-plaintext highlighter-rouge">xrdp</code>服务，使其每次启动系统时自动运行：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl <span class="nb">enable </span>xrdp
<span class="nb">sudo </span>systemctl start xrdp
</code></pre></div> </div> <p>你还可以检查<code class="language-plaintext highlighter-rouge">xrdp</code>服务的状态，以确保它正在运行：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl status xrdp
</code></pre></div> </div> <h3 id="将xrdp与桌面环境关联">将<code class="language-plaintext highlighter-rouge">xrdp</code>与桌面环境关联</h3> <p>在<code class="language-plaintext highlighter-rouge">xrdp</code>默认配置中，使用的是<code class="language-plaintext highlighter-rouge">Xfce</code>或<code class="language-plaintext highlighter-rouge">GNOME</code>桌面环境。你可以根据安装的桌面环境来配置<code class="language-plaintext highlighter-rouge">xrdp</code>。</p> <p>如果你安装的是<code class="language-plaintext highlighter-rouge">Xfce</code>，需要为<code class="language-plaintext highlighter-rouge">xrdp</code>配置启动Xfce桌面。执行以下命令来创建一个<code class="language-plaintext highlighter-rouge">.xsession</code>文件并将其内容设置为<code class="language-plaintext highlighter-rouge">xfce4-session</code>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo </span>xfce4-session <span class="o">&gt;</span>~/.xsession
</code></pre></div> </div> <p>对于GNOME桌面，默认情况下应该无需额外配置。</p> <h3 id="配置防火墙以允许rdp">配置防火墙以允许RDP</h3> <p>如果你使用<code class="language-plaintext highlighter-rouge">ufw</code>防火墙，需要允许RDP连接（默认端口是3389）：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>ufw allow 3389
</code></pre></div> </div> <h3 id="使用远程桌面客户端连接">使用远程桌面客户端连接</h3> <p>在Windows、macOS或Linux的远程桌面客户端中输入你的Ubuntu服务器的IP地址，使用RDP协议进行连接。</p> <p>在Windows中，打开“远程桌面连接”，输入Ubuntu的IP地址：</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>IP_ADDRESS:3389
</code></pre></div> </div> <p>你将看到登录界面，输入Ubuntu的用户名和密码即可访问远程桌面。</p> <h3 id="可选配置修改xrdp会话配置文件">可选配置：修改<code class="language-plaintext highlighter-rouge">xrdp</code>会话配置文件</h3> <p>如果遇到黑屏或登录失败等问题，可以尝试修改<code class="language-plaintext highlighter-rouge">xrdp</code>配置文件。例如，编辑<code class="language-plaintext highlighter-rouge">/etc/xrdp/startwm.sh</code>文件，在其中找到以下几行并注释掉：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">test</span> <span class="nt">-x</span> /etc/X11/Xsession <span class="o">&amp;&amp;</span> <span class="nb">exec</span> /etc/X11/Xsession
<span class="nb">exec</span> /bin/sh /etc/X11/Xsession
</code></pre></div> </div> <p>然后在这些行的下方添加你想使用的桌面环境。例如，如果你使用<code class="language-plaintext highlighter-rouge">Xfce</code>，可以添加以下内容：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>startxfce4
</code></pre></div> </div> <p>保存并重新启动<code class="language-plaintext highlighter-rouge">xrdp</code>服务：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart xrdp
</code></pre></div> </div> <h3 id="重新连接远程桌面">重新连接远程桌面</h3> <p>完成上述步骤后，你应该可以顺利通过远程桌面客户端连接到Ubuntu的桌面环境。</p> <p>这样你就完成了Ubuntu的远程桌面配置，之后可以使用任何支持RDP的客户端工具进行远程桌面连接。</p> </blockquote> <h2 id="14-用户操作">1.4 用户操作</h2> <p>查看全部用户<code class="language-plaintext highlighter-rouge">cat /etc/passwd</code> 修改密码<code class="language-plaintext highlighter-rouge"> sudo passwd user</code></p> <p>新增用户<code class="language-plaintext highlighter-rouge">sudo adduser user</code></p> <blockquote> <p>由于重装系统，原始的用户信息丢失，需要重新创建用户，与home的用户对应上，但是会出现问题，user1:1001旧的，user1:1007 新的，用户目录权限对不上，所以需要该指令<code class="language-plaintext highlighter-rouge">sudo chown -R new_owner:new_group /home/username</code></p> </blockquote> <h2 id="15-cuda">1.5 Cuda</h2> <blockquote> <p>CUDA 是 NVIDIA 的并行计算平台和编程模型，用于 GPU 加速计算。安装 CUDA 工具包可以让你使用 GPU 进行高性能计算，<code class="language-plaintext highlighter-rouge">nvcc</code> 则是 CUDA 的编译器。以下是 Ubuntu 上安装 CUDA、<code class="language-plaintext highlighter-rouge">nvcc</code> 等相关工具的详细步骤。</p> <h3 id="检查硬件和操作系统兼容性">检查硬件和操作系统兼容性</h3> <p>在安装 CUDA 之前，确保你的系统满足以下条件：</p> <ul> <li>你有一个支持 CUDA 的 NVIDIA 显卡。</li> <li>你使用的是 Ubuntu（例如 18.04、20.04 或 22.04 等版本）。</li> <li>你已经安装了合适的显卡驱动。</li> </ul> <h3 id="更新系统">更新系统</h3> <p>首先，更新系统的包列表和软件包，确保一切都是最新的：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt upgrade
</code></pre></div> </div> <h3 id="安装-nvidia-驱动">安装 NVIDIA 驱动</h3> <p>通常 CUDA 工具包包含 NVIDIA 驱动，但是你也可以手动安装，建议确保安装的驱动是最新的兼容版本。</p> <ul> <li> <p>检查 NVIDIA 显卡是否被识别：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lspci | <span class="nb">grep</span> <span class="nt">-i</span> nvidia
</code></pre></div> </div> </li> <li> <p>安装最新版本的驱动：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>nvidia-driver-###    <span class="c"># 将 ### 替换为推荐的驱动版本</span>
</code></pre></div> </div> </li> </ul> <p>你可以使用 <code class="language-plaintext highlighter-rouge">ubuntu-drivers devices</code> 查看推荐的 NVIDIA 驱动版本。</p> <h3 id="添加-cuda-相关的存储库">添加 CUDA 相关的存储库</h3> <p>访问 <a href="https://developer.nvidia.com/cuda-downloads">NVIDIA CUDA Toolkit 下载页面</a>，选择你对应的操作系统版本并跟随提示。通常可以使用以下步骤添加 CUDA 的存储库：</p> <ul> <li> <p>访问 CUDA 的下载页面，选择你的操作系统，通常会得到类似以下的安装命令：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu<span class="si">$(</span>lsb_release <span class="nt">-sr</span> | <span class="nb">cut</span> <span class="nt">-d</span><span class="nb">.</span> <span class="nt">-f1</span><span class="si">)</span>/x86_64/cuda-repo-ubuntu<span class="si">$(</span>lsb_release <span class="nt">-sr</span> | <span class="nb">cut</span> <span class="nt">-d</span><span class="nb">.</span> <span class="nt">-f1</span><span class="si">)</span>_&lt;version&gt;_amd64.deb
<span class="nb">sudo </span>dpkg <span class="nt">-i</span> cuda-repo-ubuntu<span class="si">$(</span>lsb_release <span class="nt">-sr</span> | <span class="nb">cut</span> <span class="nt">-d</span><span class="nb">.</span> <span class="nt">-f1</span><span class="si">)</span>_&lt;version&gt;_amd64.deb
<span class="nb">sudo </span>apt-key adv <span class="nt">--fetch-keys</span> https://developer.download.nvidia.com/compute/cuda/repos/ubuntu<span class="si">$(</span>lsb_release <span class="nt">-sr</span> | <span class="nb">cut</span> <span class="nt">-d</span><span class="nb">.</span> <span class="nt">-f1</span><span class="si">)</span>/x86_64/7fa2af80.pub
<span class="nb">sudo </span>apt update
</code></pre></div> </div> </li> <li> <p>我的版本</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64/cuda-ubuntu2004.pin
<span class="nb">sudo mv </span>cuda-ubuntu2004.pin /etc/apt/preferences.d/cuda-repository-pin-600
wget https://developer.download.nvidia.com/compute/cuda/12.6.2/local_installers/cuda-repo-ubuntu2004-12-6-local_12.6.2-560.35.03-1_amd64.deb
<span class="nb">sudo </span>dpkg <span class="nt">-i</span> cuda-repo-ubuntu2004-12-6-local_12.6.2-560.35.03-1_amd64.deb
<span class="nb">sudo cp</span> /var/cuda-repo-ubuntu2004-12-6-local/cuda-<span class="k">*</span><span class="nt">-keyring</span>.gpg /usr/share/keyrings/
<span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get <span class="nt">-y</span> <span class="nb">install </span>cuda-toolkit-12-6
</code></pre></div> </div> </li> </ul> <h3 id="安装-cuda-工具包">安装 CUDA 工具包</h3> <p>使用以下命令安装 CUDA 工具包：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>cuda
</code></pre></div> </div> <p>这会安装 CUDA 相关的工具，包括编译器 <code class="language-plaintext highlighter-rouge">nvcc</code>。</p> <h3 id="设置环境变量">设置环境变量</h3> <p>安装完成后，还需要配置环境变量，才能正确地调用 CUDA 和 <code class="language-plaintext highlighter-rouge">nvcc</code>。可以在 <code class="language-plaintext highlighter-rouge">.bashrc</code> 中添加以下路径：</p> <ul> <li> <p>编辑 <code class="language-plaintext highlighter-rouge">.bashrc</code> 文件：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano ~/.bashrc
</code></pre></div> </div> </li> <li> <p>添加以下行以设置 CUDA 环境变量（假设安装在默认位置 <code class="language-plaintext highlighter-rouge">/usr/local/cuda</code>）：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/cuda/bin:<span class="nv">$PATH</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/cuda/lib64:<span class="nv">$LD_LIBRARY_PATH</span>
</code></pre></div> </div> </li> <li> <p>使修改立即生效：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ~/.bashrc
</code></pre></div> </div> </li> </ul> <h3 id="验证-cuda-和-nvcc">验证 CUDA 和 NVCC</h3> <p>验证安装是否成功。</p> <ul> <li> <p>检查 NVIDIA 驱动是否工作：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nvidia-smi
</code></pre></div> </div> <p>你应该能够看到显卡的状态和驱动程序信息。</p> </li> <li> <p>检查 CUDA 编译器 <code class="language-plaintext highlighter-rouge">nvcc</code>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nvcc <span class="nt">-V</span>
</code></pre></div> </div> <p>你应该看到 <code class="language-plaintext highlighter-rouge">nvcc</code> 版本信息，说明安装成功。</p> </li> </ul> <h3 id="运行-cuda-示例代码可选">运行 CUDA 示例代码（可选）</h3> <p>安装 CUDA 工具包后，NVIDIA 通常会提供一些示例代码，可以用来测试 GPU 是否正常工作。</p> <ul> <li> <p>进入 CUDA 示例代码目录：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /usr/local/cuda/samples
</code></pre></div> </div> </li> <li> <p>编译并运行一个测试程序（例如 <code class="language-plaintext highlighter-rouge">deviceQuery</code>）：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>make
<span class="nb">cd </span>1_Utilities/deviceQuery
./deviceQuery
</code></pre></div> </div> <p>这将会展示 GPU 的一些详细信息，如果能够正确显示，那么说明 CUDA 工作正常。</p> </li> </ul> <h3 id="总结">总结</h3> <ol> <li><strong>更新系统</strong>：<code class="language-plaintext highlighter-rouge">sudo apt update &amp;&amp; sudo apt upgrade</code></li> <li><strong>安装 NVIDIA 驱动</strong>：<code class="language-plaintext highlighter-rouge">sudo apt install nvidia-driver-###</code></li> <li><strong>添加 CUDA 存储库</strong>：根据 CUDA 下载页面获取存储库地址并添加。</li> <li><strong>安装 CUDA 工具包</strong>：<code class="language-plaintext highlighter-rouge">sudo apt install cuda</code></li> <li><strong>设置环境变量</strong>：编辑 <code class="language-plaintext highlighter-rouge">.bashrc</code>，添加 CUDA 相关路径。</li> <li><strong>验证安装</strong>：运行 <code class="language-plaintext highlighter-rouge">nvidia-smi</code> 和 <code class="language-plaintext highlighter-rouge">nvcc -V</code> 验证安装是否成功。</li> </ol> <p>通过这些步骤，你应该能够在 Ubuntu 上顺利安装 CUDA 工具包，并开始使用 GPU 加速你的计算任务。</p> </blockquote> <div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"> <h3>文档信息</h3> <ul> <li>本文作者：<a href="https://slienceme.cn" target="_blank">slience_me</a></li> <li>本文链接：<a href="https://slienceme.cn/2024/10/24/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E7%BB%9F%E9%87%8D%E8%A3%85&SSH&xrdp&cuda/" target="_blank">https://slienceme.cn/2024/10/24/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E7%BB%9F%E9%87%8D%E8%A3%85&SSH&xrdp&cuda/</a></li> <li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">创意共享3.0许可证</a>）</li> </ul> </div> </article> <div class="share"> <div class="share-component" data-disabled='qq,facebook'></div> </div> <div class="comment"> <script src="https://giscus.app/client.js" data-repo="slience-me/blog-comments" data-repo-id="MDEwOlJlcG9zaXRvcnk5MzEyNzkxNw==" data-category="Announcements" data-category-id="DIC_kwDOBY0E7c4CRtg9" data-mapping="title" data-strict="1" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" async> </script> </div> </div> <div class="column one-fourth"> <h3>Search</h3> <div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"> </div> <ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul> <script src="https://slienceme.cn/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: 'https://slienceme.cn/assets/search_data.json?v=1736474773', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: 'No results found', limit: 10, fuzzy: false, exclude: ['Welcome'] }) </script> <h3 class="post-directory-title mobile-hidden">Table of Contents</h3> <div id="post-directory-module" class="mobile-hidden"> <section class="post-directory"> <dl></dl> </section> </div> <script src="https://slienceme.cn/assets/js/jquery.toc.js"></script> </div> </div> </section> <footer class="container"> <div class="site-footer" role="contentinfo"> <div class="copyright left mobile-block"> Copyright@ 2019-2025 slience_me 版权所有&emsp; <img src="/images/logo/logo.png" class="w-full" style="width: 12px;"> <a href="https://beian.mps.gov.cn/#/query/webSearch?code=13102202000626" rel="noreferrer" target="_blank">冀公网安备13102202000626</a>&emsp; <a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank" rel="noreferrer">津ICP备2024026565号-1</a> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a> </div> <ul class="site-footer-links right mobile-hidden"> <li> <a href="javascript:window.scrollTo(0,0)" >TOP</a> </li> </ul> <br/> <script async src="https://slienceme.cn/assets/vendor/busuanzi/2.3/busuanzi.pure.mini.js"></script> <div class="mobile-hidden" style="margin-top:8px"> <span id="busuanzi_container_site_pv" style="display:none"> 本站访问量<span id="busuanzi_value_site_pv"></span>次 </span> <span id="busuanzi_container_site_uv" style="display:none"> / 本站访客数<span id="busuanzi_value_site_uv"></span>人 </span> <span id="busuanzi_container_page_pv" style="display:none"> / 本页访问量<span id="busuanzi_value_page_pv"></span>次 / 统计始于2024-12-01 </span> </div> </div> </footer> <div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a> </div> <script src="https://slienceme.cn/assets/vendor/share.js/dist/js/share.min.js"></script> <script src="https://slienceme.cn/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script> </body> </html>
