<!DOCTYPE html> <html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> <title>Java｜Java语言高级（第六部分）Junit&反射&注解 &mdash; Slience_me的博客</title> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/vendor/primer-css/css/primer.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/css/components/collection.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/css/components/repo-card.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/css/sections/repo-list.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/css/components/boxed-group.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/css/globals/common.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/css/globals/responsive.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/css/posts/index.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/vendor/octicons/octicons/octicons.css"> <link rel="stylesheet" href="https://mazhuang.org/rouge-themes/dist/github.css"> <link rel="stylesheet" href="https://blog.slienceme.cn/assets/vendor/share.js/dist/css/share.min.css"> <link rel="canonical" href="https://blog.slienceme.cn/2021/06/25/Java%E8%AF%AD%E8%A8%80%E9%AB%98%E7%BA%A7-%E7%AC%AC%E5%85%AD%E9%83%A8%E5%88%86-Junit&%E5%8F%8D%E5%B0%84&%E6%B3%A8%E8%A7%A3/"> <link rel="alternate" type="application/atom+xml" title="Slience_me的博客" href="https://blog.slienceme.cn/feed.xml"> <link rel="shortcut icon" href="https://blog.slienceme.cn/favicon.ico"> <meta property="og:title" content="Java｜Java语言高级（第六部分）Junit&反射&注解"> <meta name="keywords" content="编程语言, Java"> <meta name="og:keywords" content="编程语言, Java"> <meta name="description" content=""> <meta name="og:description" content=""> <meta property="og:url" content="https://blog.slienceme.cn/2021/06/25/Java%E8%AF%AD%E8%A8%80%E9%AB%98%E7%BA%A7-%E7%AC%AC%E5%85%AD%E9%83%A8%E5%88%86-Junit&%E5%8F%8D%E5%B0%84&%E6%B3%A8%E8%A7%A3/"> <meta property="og:site_name" content="Slience_me的博客"> <meta property="og:type" content="article"> <meta property="og:locale" content="zh_CN" /> <meta property="article:published_time" content="2021-06-25"> <meta name="google-site-verification" content="2feHjT1GNs1Yi2JQfOtdYx7d048naG_-cMwZaDAopIA" /> <script src="https://blog.slienceme.cn/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://blog.slienceme.cn/assets/js/main.js"></script> </head> <body class="" data-mz=""> <header class="site-header"> <div class="container"> <h1><a href="https://blog.slienceme.cn/" title="Slience_me的博客"><span class="octicon octicon-mark-github"></span> Slience_me的博客</a></h1> <button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <nav class="site-header-nav" role="navigation"> <a href="https://blog.slienceme.cn/" class="site-header-nav-item" target="" title="首页">首页</a> <a href="https://blog.slienceme.cn/categories/" class="site-header-nav-item" target="" title="分类">分类</a> <a href="https://blog.slienceme.cn/archives/" class="mobile-hidden site-header-nav-item" target="" title="归档">归档</a> <a href="https://blog.slienceme.cn/open-source/" class="mobile-hidden site-header-nav-item" target="" title="开源">开源</a> <a href="https://blog.slienceme.cn/fragments/" class="site-header-nav-item" target="" title="片段">片段</a> <a href="https://blog.slienceme.cn/wiki/" class="site-header-nav-item" target="" title="维基">维基</a> <a href="https://blog.slienceme.cn/links/" class="mobile-hidden site-header-nav-item" target="" title="链接">链接</a> <a href="https://blog.slienceme.cn/about/" class="site-header-nav-item" target="" title="关于">关于</a> <a class="mobile-hidden" href="https://blog.slienceme.cn/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a> </nav> </div> </header> <section class="collection-head small geopattern" data-pattern-id="Java｜Java语言高级（第"> <div class="container"> <div class="columns"> <div class="column three-fourths"> <div class="collection-title"> <h1 class="collection-header">Java｜Java语言高级（第六部分）Junit&反射&注解</h1> <div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2021/06/25 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://blog.slienceme.cn/categories/#Java" title="Java">Java</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 11924 字，约 35 分钟 </span> </div> </div> </div> <div class="column one-fourth mobile-hidden"> <div class="collection-title"> </div> </div> </div> </div> </section> <section class="container content"> <div class="columns"> <div class="column three-fourths" > <article class="article-content markdown-body"> <p><img src="https://blog.slienceme.cn/images/posts/logo_slienceme3.png" alt="img" /></p> <p>本文作者： <a href="https://slienceme.cn/">slience_me</a></p> <hr /> <h1 id="junit--反射--注解">Junit &amp; 反射 &amp; 注解</h1> <h2 id="1-junit单元测试">1. Junit单元测试：</h2> <p><img src="https://blog.slienceme.cn/images/posts/20210624211153674.bmp.jpg" alt="Alt Text" /></p> <h3 id="11-测试分类">1.1 测试分类：</h3> <ol> <li>黑盒测试：不需要写代码，给输入值，看程序是否能够输出期望的值。</li> <li>白盒测试：需要写代码的。关注程序具体的执行流程。</li> </ol> <h3 id="12-junit使用白盒测试">1.2 Junit使用：白盒测试</h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">xyz.slienceme.junit</span><span class="o">;</span>
<span class="cm">/**
 * 计算器类
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Calculator</span> <span class="o">{</span>
    <span class="cm">/**
     * 加法
     * @param a
     * @param b
     * @return
     */</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">add</span> <span class="o">(</span><span class="kt">int</span> <span class="n">a</span> <span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">){</span>
        <span class="c1">//int i = 3/0;</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * 减法
     * @param a
     * @param b
     * @return
     */</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">sub</span> <span class="o">(</span><span class="kt">int</span> <span class="n">a</span> <span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">xyz.slienceme.junit</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CalculatorTest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//创建对象</span>
        <span class="nc">Calculator</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Calculator</span><span class="o">();</span>
        <span class="c1">//调用</span>
       <span class="cm">/* int result = c.add(1, 2);
        System.out.println(result);*/</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">sub</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">"abc"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="步骤">步骤：</h4> <ol> <li>定义一个测试类(测试用例) <ul> <li>建议： <ul> <li>测试类名：被测试的类名Test CalculatorTest</li> <li>包名：xxx.xxx.xx.test xyz.slienceme.test</li> </ul> </li> </ul> </li> <li>定义测试方法：可以独立运行 <ul> <li>建议： <ul> <li>方法名：test测试的方法名 testAdd()</li> <li>返回值：void</li> <li>参数列表：空参</li> </ul> </li> </ul> </li> <li>给方法加@Test</li> <li>导入junit依赖环境</li> </ol> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">xyz.slienceme.test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">xyz.slienceme.junit.Calculator</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.After</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Assert</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Before</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CalculatorTest</span> <span class="o">{</span>
    <span class="cm">/**
     * 初始化方法：
     *  用于资源申请，所有测试方法在执行之前都会先执行该方法
     */</span>
    <span class="nd">@Before</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"init..."</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 释放资源方法：
     *  在所有测试方法执行完后，都会自动执行该方法
     */</span>
    <span class="nd">@After</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">(){</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"close..."</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 测试add方法
     */</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testAdd</span><span class="o">(){</span>
       <span class="c1">// System.out.println("我被执行了");</span>
        <span class="c1">//1.创建计算器对象</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"testAdd..."</span><span class="o">);</span>
        <span class="nc">Calculator</span> <span class="n">c</span>  <span class="o">=</span> <span class="k">new</span> <span class="nc">Calculator</span><span class="o">();</span>
        <span class="c1">//2.调用add方法</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
        <span class="c1">//System.out.println(result);</span>

        <span class="c1">//3.断言  我断言这个结果是3</span>
        <span class="nc">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="n">result</span><span class="o">);</span>

    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testSub</span><span class="o">(){</span>
        <span class="c1">//1.创建计算器对象</span>
        <span class="nc">Calculator</span> <span class="n">c</span>  <span class="o">=</span> <span class="k">new</span> <span class="nc">Calculator</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">sub</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"testSub...."</span><span class="o">);</span>
        <span class="nc">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(-</span><span class="mi">1</span><span class="o">,</span><span class="n">result</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div> <h4 id="判定结果">判定结果：</h4> <ul> <li>红色：失败</li> <li>绿色：成功</li> <li>一般我们会使用断言操作来处理结果 <ul> <li>Assert.assertEquals(期望的结果,运算的结果);</li> </ul> </li> </ul> <h4 id="补充">补充：</h4> <ul> <li>@Before: <ul> <li>修饰的方法会在测试方法之前被自动执行</li> </ul> </li> <li>@After: <ul> <li>修饰的方法会在测试方法执行之后自动被执行</li> </ul> </li> </ul> <h2 id="2-反射框架设计的灵魂">2. 反射：框架设计的灵魂</h2> <ul> <li>框架：半成品软件。可以在框架的基础上进行软件开发，简化编码</li> <li>反射：将类的各个组成部分封装为其他对象，这就是反射机制</li> <li>好处： 1. 可以在程序运行过程中，操作这些对象。 2. 可以解耦，提高程序的可扩展性。</li> </ul> <h3 id="21-获取class对象的方式">2.1 获取Class对象的方式：</h3> <ol> <li><code class="language-plaintext highlighter-rouge">Class.forName("全类名")</code>：将字节码文件加载进内存，返回<code class="language-plaintext highlighter-rouge">Class</code>对象 多用于配置文件，将类名定义在配置文件中。读取文件，加载类</li> <li><code class="language-plaintext highlighter-rouge">类名.class</code>：通过类名的属性<code class="language-plaintext highlighter-rouge">class</code>获取 多用于参数的传递</li> <li><code class="language-plaintext highlighter-rouge">对象.getClass()</code>：<code class="language-plaintext highlighter-rouge">getClass()</code>方法在<code class="language-plaintext highlighter-rouge">Object</code>类中定义着。 多用于对象的获取字节码的方式</li> </ol> <ul> <li>结论： 同一个字节码文件<code class="language-plaintext highlighter-rouge">(*.class)</code>在一次程序运行过程中，只会被加载一次，不论通过哪一种方式获取的<code class="language-plaintext highlighter-rouge">Class</code>对象都是同一个。</li> </ul> <p><img src="https://blog.slienceme.cn/images/posts/20210624213837359.bmp.jpg" alt="Alt Text" /></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">xyz.slienceme.reflect</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">xyz.slienceme.domain.Person</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">xyz.slienceme.domain.Student</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReflectDemo1</span> <span class="o">{</span>
    <span class="cm">/**
        获取Class对象的方式：
            1. Class.forName("全类名")：将字节码文件加载进内存，返回Class对象
            2. 类名.class：通过类名的属性class获取
            3. 对象.getClass()：getClass()方法在Object类中定义着。
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="c1">//1.Class.forName("全类名")</span>
        <span class="nc">Class</span> <span class="n">cls1</span> <span class="o">=</span> <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"xyz.slienceme.domain.Person"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cls1</span><span class="o">);</span>
        <span class="c1">//2.类名.class</span>
        <span class="nc">Class</span> <span class="n">cls2</span> <span class="o">=</span> <span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cls2</span><span class="o">);</span>
        <span class="c1">//3.对象.getClass()</span>
        <span class="nc">Person</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">();</span>
        <span class="nc">Class</span> <span class="n">cls3</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cls3</span><span class="o">);</span>
        <span class="c1">//== 比较三个对象</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cls1</span> <span class="o">==</span> <span class="n">cls2</span><span class="o">);</span><span class="c1">//true</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cls1</span> <span class="o">==</span> <span class="n">cls3</span><span class="o">);</span><span class="c1">//true</span>
        <span class="nc">Class</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">Student</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span> <span class="o">==</span> <span class="n">cls1</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">//输出内容</span>
<span class="cm">/*
class xyz.slienceme.domain.Person
class xyz.slienceme.domain.Person
class xyz.slienceme.domain.Person
true
true
false
*/</span>
</code></pre></div></div> <h3 id="22-class对象功能">2.2 Class对象功能：</h3> <h4 id="221-获取功能">2.2.1 获取功能：</h4> <h5 id="1-获取成员变量">1. 获取成员变量</h5> <ul> <li><code class="language-plaintext highlighter-rouge">Field[] getFields()</code> ：获取所有public修饰的成员变量</li> <li> <p><code class="language-plaintext highlighter-rouge">Field getField(String name)</code> 获取指定名称的 public修饰的成员变量</p> </li> <li><code class="language-plaintext highlighter-rouge">Field[] getDeclaredFields()</code> 获取所有的成员变量，不考虑修饰符</li> <li><code class="language-plaintext highlighter-rouge">Field getDeclaredField(String name)</code> 获取指定名称的的成员变量，不考虑修饰符</li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">xyz.slienceme.reflect</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">xyz.slienceme.domain.Person</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.reflect.Field</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReflectDemo2</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="c1">//0.获取Person的Class对象</span>
        <span class="nc">Class</span> <span class="n">personClass</span> <span class="o">=</span> <span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
        <span class="c1">//1.Field[] getFields()获取所有public修饰的成员变量</span>
        <span class="nc">Field</span><span class="o">[]</span> <span class="n">fields</span> <span class="o">=</span> <span class="n">personClass</span><span class="o">.</span><span class="na">getFields</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Field</span> <span class="n">field</span> <span class="o">:</span> <span class="n">fields</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">field</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"------------"</span><span class="o">);</span>
        <span class="c1">//2.Field getField(String name)</span>
        <span class="nc">Field</span> <span class="n">a</span> <span class="o">=</span> <span class="n">personClass</span><span class="o">.</span><span class="na">getField</span><span class="o">(</span><span class="s">"a"</span><span class="o">);</span>
        <span class="c1">//获取成员变量a 的值</span>
        <span class="nc">Person</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">();</span>
        <span class="nc">Object</span> <span class="n">value</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
        <span class="c1">//设置a的值</span>
        <span class="n">a</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">p</span><span class="o">,</span><span class="s">"张三"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==================="</span><span class="o">);</span>
        <span class="c1">//Field[] getDeclaredFields()：获取所有的成员变量，不考虑修饰符</span>
        <span class="nc">Field</span><span class="o">[]</span> <span class="n">declaredFields</span> <span class="o">=</span> <span class="n">personClass</span><span class="o">.</span><span class="na">getDeclaredFields</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Field</span> <span class="n">declaredField</span> <span class="o">:</span> <span class="n">declaredFields</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">declaredField</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//Field getDeclaredField(String name)</span>
        <span class="nc">Field</span> <span class="n">d</span> <span class="o">=</span> <span class="n">personClass</span><span class="o">.</span><span class="na">getDeclaredField</span><span class="o">(</span><span class="s">"d"</span><span class="o">);</span>
        <span class="c1">//忽略访问权限修饰符的安全检查</span>
        <span class="n">d</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span><span class="c1">//暴力反射</span>
        <span class="nc">Object</span> <span class="n">value2</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">value2</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
public java.lang.String xyz.slienceme.domain.Person.a
------------
null
Person{name='null', age=0, a='张三', b='null', c='null', d='null'}
===================
private java.lang.String xyz.slienceme.domain.Person.name
private int xyz.slienceme.domain.Person.age
public java.lang.String xyz.slienceme.domain.Person.a
protected java.lang.String xyz.slienceme.domain.Person.b
java.lang.String xyz.slienceme.domain.Person.c
private java.lang.String xyz.slienceme.domain.Person.d
null

 */</span>
</code></pre></div></div> <h5 id="2-获取构造方法">2. 获取构造方法</h5> <ul> <li><code class="language-plaintext highlighter-rouge">Constructor&lt;?&gt;[] getConstructors()</code></li> <li> <p><code class="language-plaintext highlighter-rouge">Constructor&lt;T&gt; getConstructor(类&lt;?&gt;... parameterTypes)</code></p> </li> <li><code class="language-plaintext highlighter-rouge">Constructor&lt;T&gt; getDeclaredConstructor(类&lt;?&gt;... parameterTypes)</code></li> <li><code class="language-plaintext highlighter-rouge">Constructor&lt;?&gt;[] getDeclaredConstructors()</code></li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">xyz.slienceme.reflect</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">xyz.slienceme.domain.Person</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.reflect.Constructor</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReflectDemo3</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="c1">//0.获取Person的Class对象</span>
        <span class="nc">Class</span> <span class="n">personClass</span> <span class="o">=</span> <span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
        <span class="c1">//Constructor&lt;T&gt; getConstructor(类&lt;?&gt;... parameterTypes)</span>
        <span class="nc">Constructor</span> <span class="n">constructor</span> <span class="o">=</span> <span class="n">personClass</span><span class="o">.</span><span class="na">getConstructor</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="kt">int</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">constructor</span><span class="o">);</span>
        <span class="c1">//创建对象</span>
        <span class="nc">Object</span> <span class="n">person</span> <span class="o">=</span> <span class="n">constructor</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="s">"张三"</span><span class="o">,</span> <span class="mi">23</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">person</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"----------"</span><span class="o">);</span>
        <span class="nc">Constructor</span> <span class="n">constructor1</span> <span class="o">=</span> <span class="n">personClass</span><span class="o">.</span><span class="na">getConstructor</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">constructor1</span><span class="o">);</span>
        <span class="c1">//创建对象</span>
        <span class="nc">Object</span> <span class="n">person1</span> <span class="o">=</span> <span class="n">constructor1</span><span class="o">.</span><span class="na">newInstance</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">person1</span><span class="o">);</span>
        <span class="nc">Object</span> <span class="n">o</span> <span class="o">=</span> <span class="n">personClass</span><span class="o">.</span><span class="na">newInstance</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">o</span><span class="o">);</span>
        <span class="c1">//constructor1.setAccessible(true);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
public xyz.slienceme.domain.Person(java.lang.String,int)
Person{name='张三', age=23, a='null', b='null', c='null', d='null'}
----------
public xyz.slienceme.domain.Person()
Person{name='null', age=0, a='null', b='null', c='null', d='null'}
Person{name='null', age=0, a='null', b='null', c='null', d='null'}
* */</span>
</code></pre></div></div> <h5 id="3-获取成员方法">3. 获取成员方法</h5> <ul> <li><code class="language-plaintext highlighter-rouge">Method[] getMethods()</code></li> <li> <p><code class="language-plaintext highlighter-rouge">Method getMethod(String name, 类&lt;?&gt;... parameterTypes)</code></p> </li> <li><code class="language-plaintext highlighter-rouge">Method[] getDeclaredMethods()</code></li> <li><code class="language-plaintext highlighter-rouge">Method getDeclaredMethod(String name, 类&lt;?&gt;... parameterTypes)</code></li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">xyz.slienceme.reflect</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">xyz.slienceme.domain.Person</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReflectDemo4</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="c1">//0.获取Person的Class对象</span>
        <span class="nc">Class</span> <span class="n">personClass</span> <span class="o">=</span> <span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
        <span class="c1">//获取指定名称的方法</span>
        <span class="nc">Method</span> <span class="n">eat_method</span> <span class="o">=</span> <span class="n">personClass</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="s">"eat"</span><span class="o">);</span>
        <span class="nc">Person</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">();</span>
        <span class="c1">//执行方法</span>
        <span class="n">eat_method</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>
        <span class="nc">Method</span> <span class="n">eat_method2</span> <span class="o">=</span> <span class="n">personClass</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="s">"eat"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="c1">//执行方法</span>
        <span class="n">eat_method2</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">p</span><span class="o">,</span><span class="s">"饭"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"-----------------"</span><span class="o">);</span>
        <span class="c1">//获取所有public修饰的方法</span>
        <span class="nc">Method</span><span class="o">[]</span> <span class="n">methods</span> <span class="o">=</span> <span class="n">personClass</span><span class="o">.</span><span class="na">getMethods</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Method</span> <span class="n">method</span> <span class="o">:</span> <span class="n">methods</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">method</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
            <span class="c1">//method.setAccessible(true);</span>
        <span class="o">}</span>
        <span class="c1">//获取类名</span>
        <span class="nc">String</span> <span class="n">className</span> <span class="o">=</span> <span class="n">personClass</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">className</span><span class="o">);</span><span class="c1">//xyz.slienceme.domain.Person</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
eat...
eat...饭
-----------------
public java.lang.String xyz.slienceme.domain.Person.getName()
getName
public java.lang.String xyz.slienceme.domain.Person.toString()
toString
public void xyz.slienceme.domain.Person.setName(java.lang.String)
setName
public int xyz.slienceme.domain.Person.getAge()
getAge
public void xyz.slienceme.domain.Person.eat(java.lang.String)
eat
public void xyz.slienceme.domain.Person.eat()
eat
public void xyz.slienceme.domain.Person.setAge(int)
setAge
public final void java.lang.Object.wait(long,int) throws java.lang.InterruptedException
wait
public final void java.lang.Object.wait() throws java.lang.InterruptedException
wait
public final native void java.lang.Object.wait(long) throws java.lang.InterruptedException
wait
public boolean java.lang.Object.equals(java.lang.Object)
equals
public native int java.lang.Object.hashCode()
hashCode
public final native java.lang.Class java.lang.Object.getClass()
getClass
public final native void java.lang.Object.notify()
notify
public final native void java.lang.Object.notifyAll()
notifyAll
xyz.slienceme.domain.Person
*/</span>
</code></pre></div></div> <h5 id="4-获取全类名">4. 获取全类名</h5> <ul> <li><code class="language-plaintext highlighter-rouge">String getName()</code></li> </ul> <hr /> <h3 id="23-field成员变量">2.3 Field：成员变量</h3> <h4 id="操作">操作：</h4> <h5 id="1-设置值">1. 设置值</h5> <ul> <li><code class="language-plaintext highlighter-rouge">void set(Object obj, Object value)</code> <h5 id="2-获取值">2. 获取值</h5> </li> <li><code class="language-plaintext highlighter-rouge">get(Object obj)</code></li> </ul> <h5 id="3-忽略访问权限修饰符的安全检查">3. 忽略访问权限修饰符的安全检查</h5> <ul> <li><code class="language-plaintext highlighter-rouge">setAccessible(true)</code>:暴力反射</li> </ul> <hr /> <h3 id="24-constructor构造方法">2.4 Constructor:构造方法</h3> <h4 id="创建对象">创建对象：</h4> <ul> <li> <p><code class="language-plaintext highlighter-rouge">T newInstance(Object... initargs)</code></p> </li> <li> <h2 id="如果使用空参数构造方法创建对象操作可以简化class对象的newinstance方法">如果使用空参数构造方法创建对象，操作可以简化：<code class="language-plaintext highlighter-rouge">Class</code>对象的<code class="language-plaintext highlighter-rouge">newInstance</code>方法</h2> </li> </ul> <h3 id="25-method方法对象">2.5 Method：方法对象</h3> <h4 id="执行方法">执行方法：</h4> <ul> <li><code class="language-plaintext highlighter-rouge">Object invoke(Object obj, Object... args)</code></li> </ul> <h4 id="获取方法名称">获取方法名称：</h4> <ul> <li><code class="language-plaintext highlighter-rouge">String getName</code>:获取方法名</li> </ul> <hr /> <h3 id="26-案例">2.6 案例：</h3> <h4 id="需求">需求：</h4> <ul> <li>写一个”框架”，不能改变该类的任何代码的前提下，可以帮我们创建任意类的对象，并且执行其中任意方法 <h4 id="实现">实现：</h4> <ol> <li>配置文件</li> <li>反射 <h4 id="步骤-1">步骤：</h4> </li> <li>将需要创建的对象的全类名和需要执行的方法定义在配置文件中</li> <li>在程序中加载读取配置文件</li> <li>使用反射技术来加载类文件进内存</li> <li>创建对象</li> <li>执行方法</li> </ol> </li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">xyz.slienceme.reflect</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Properties</span><span class="o">;</span>

<span class="cm">/**
 * 框架类
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReflectTest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="c1">//可以创建任意类的对象，可以执行任意方法</span>
        <span class="cm">/*
            前提：不能改变该类的任何代码。可以创建任意类的对象，可以执行任意方法
         */</span>
      <span class="cm">/*  Person p = new Person();
        p.eat();*/</span>
<span class="cm">/*
        Student stu = new Student();
        stu.sleep();*/</span>

        <span class="c1">//1.加载配置文件</span>
        <span class="c1">//1.1创建Properties对象</span>
        <span class="nc">Properties</span> <span class="n">pro</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Properties</span><span class="o">();</span>
        <span class="c1">//1.2加载配置文件，转换为一个集合</span>
        <span class="c1">//1.2.1获取class目录下的配置文件</span>
        <span class="nc">ClassLoader</span> <span class="n">classLoader</span> <span class="o">=</span> <span class="nc">ReflectTest</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getClassLoader</span><span class="o">();</span>
        <span class="nc">InputStream</span> <span class="n">is</span> <span class="o">=</span> <span class="n">classLoader</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">"pro.properties"</span><span class="o">);</span>
        <span class="n">pro</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="n">is</span><span class="o">);</span>

        <span class="c1">//2.获取配置文件中定义的数据</span>
        <span class="nc">String</span> <span class="n">className</span> <span class="o">=</span> <span class="n">pro</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"className"</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">methodName</span> <span class="o">=</span> <span class="n">pro</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"methodName"</span><span class="o">);</span>

        <span class="c1">//3.加载该类进内存</span>
        <span class="nc">Class</span> <span class="n">cls</span> <span class="o">=</span> <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="n">className</span><span class="o">);</span>
        <span class="c1">//4.创建对象</span>
        <span class="nc">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="na">newInstance</span><span class="o">();</span>
        <span class="c1">//5.获取方法对象</span>
        <span class="nc">Method</span> <span class="n">method</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="n">methodName</span><span class="o">);</span>
        <span class="c1">//6.执行方法</span>
        <span class="n">method</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">obj</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*sleep...*/</span>
</code></pre></div></div> <h2 id="3-注解">3. 注解：</h2> <h3 id="概念">概念：</h3> <ul> <li>说明程序的。给计算机看的 <h3 id="注释">注释：</h3> </li> <li>用文字描述程序的。给程序员看的</li> </ul> <h3 id="定义">定义：</h3> <ul> <li>注解（<code class="language-plaintext highlighter-rouge">Annotation</code>），也叫元数据。一种代码级别的说明。它是JDK1.5及以后版本引入的一个特性，与类、接口、枚举是在同一个层次。它可以声明在包、类、字段、方法、局部变量、方法参数等的前面，用来对这些元素进行说明，注释。 <h3 id="概念描述">概念描述：</h3> </li> <li>JDK1.5之后的新特性</li> <li>说明程序的</li> <li>使用注解：<code class="language-plaintext highlighter-rouge">@注解名称</code></li> </ul> <hr /> <h3 id="作用分类">作用分类：</h3> <p>①编写文档：通过代码里标识的注解生成文档【<code class="language-plaintext highlighter-rouge">生成文档doc文档</code>】 ②代码分析：通过代码里标识的注解对代码进行分析【<code class="language-plaintext highlighter-rouge">使用反射</code>】 ③编译检查：通过代码里标识的注解让编译器能够实现基本的编译检查【<code class="language-plaintext highlighter-rouge">Override</code>】</p> <h3 id="jdk中预定义的一些注解">JDK中预定义的一些注解</h3> <ul> <li><code class="language-plaintext highlighter-rouge">@Override</code> ：检测被该注解标注的方法是否是继承自父类(接口)的</li> <li><code class="language-plaintext highlighter-rouge">@Deprecated</code>：该注解标注的内容，表示已过时</li> <li><code class="language-plaintext highlighter-rouge">@SuppressWarnings</code>：压制警告 <ul> <li>一般传递参数all <code class="language-plaintext highlighter-rouge">@SuppressWarnings("all")</code></li> </ul> </li> </ul> <hr /> <h3 id="自定义注解">自定义注解</h3> <h4 id="格式">格式：</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">元注解</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="n">注解名称</span><span class="o">{</span>
	<span class="n">属性列表</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="本质">本质：</h4> <ul> <li>注解本质上就是一个接口，该接口默认继承Annotation接口 <ul> <li><code class="language-plaintext highlighter-rouge">public interface MyAnno extends java.lang.annotation.Annotation {}</code> <h4 id="属性">属性：</h4> </li> </ul> </li> <li>接口中的抽象方法 <h4 id="要求">要求：</h4> <h5 id="1-属性的返回值类型有下列取值">1. 属性的返回值类型有下列取值</h5> </li> <li>基本数据类型</li> <li>String</li> <li>枚举</li> <li>注解</li> <li>以上类型的数组</li> </ul> <h5 id="2-定义了属性在使用时需要给属性赋值">2. 定义了属性，在使用时需要给属性赋值</h5> <ol> <li>如果定义属性时，使用<code class="language-plaintext highlighter-rouge">default</code>关键字给属性默认初始化值，则使用注解时，可以不进行属性的赋值。</li> <li>如果只有一个属性需要赋值，并且属性的名称是<code class="language-plaintext highlighter-rouge">value</code>，则<code class="language-plaintext highlighter-rouge">value</code>可以省略，直接定义值即可。</li> <li>数组赋值时，值使用{}包裹。如果数组中只有一个值，则<code class="language-plaintext highlighter-rouge">{}</code>可以省略</li> </ol> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">xyz.slienceme.annotation</span><span class="o">;</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">MyAnno</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="nf">value</span><span class="o">();</span>
    <span class="nc">Person</span> <span class="nf">per</span><span class="o">();</span>
    <span class="nc">MyAnno2</span> <span class="nf">anno2</span><span class="o">();</span>
    <span class="nc">String</span><span class="o">[]</span> <span class="nf">strs</span><span class="o">();</span>
     <span class="cm">/*String name() default "张三";*/</span>
     <span class="cm">/*String show2();
     Person per();
     MyAnno2 anno2();
     String[] strs();*/</span>
<span class="o">}</span>
</code></pre></div></div> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">xyz.slienceme.annotation</span><span class="o">;</span>
<span class="nd">@MyAnno</span><span class="o">(</span><span class="n">value</span><span class="o">=</span><span class="mi">12</span><span class="o">,</span><span class="n">per</span> <span class="o">=</span> <span class="nc">Person</span><span class="o">.</span><span class="na">P1</span><span class="o">,</span><span class="n">anno2</span> <span class="o">=</span> <span class="nd">@MyAnno2</span><span class="o">,</span><span class="n">strs</span><span class="o">=</span><span class="s">"bbb"</span><span class="o">)</span>
<span class="nd">@MyAnno3</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Worker</span> <span class="o">{</span>
    <span class="nd">@MyAnno3</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">"aaa"</span><span class="o">;</span>
    <span class="nd">@MyAnno3</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">show</span><span class="o">(){</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="元注解用于描述注解的注解">元注解：用于描述注解的注解</h3> <ul> <li><code class="language-plaintext highlighter-rouge">@Target</code>：描述注解能够作用的位置 <ul> <li><code class="language-plaintext highlighter-rouge">ElementType</code>取值： <ul> <li><code class="language-plaintext highlighter-rouge">TYPE</code>：可以作用于类上</li> <li><code class="language-plaintext highlighter-rouge">METHOD</code>：可以作用于方法上</li> <li><code class="language-plaintext highlighter-rouge">FIELD</code>：可以作用于成员变量上</li> </ul> </li> </ul> </li> <li><code class="language-plaintext highlighter-rouge">@Retention</code>：描述注解被保留的阶段 <ul> <li><code class="language-plaintext highlighter-rouge">@Retention(RetentionPolicy.RUNTIME)</code>：当前被描述的注解，会保留到class字节码文件中，并被<code class="language-plaintext highlighter-rouge">JVM</code>读取到</li> </ul> </li> <li><code class="language-plaintext highlighter-rouge">@Documented</code>：描述注解是否被抽取到api文档中</li> <li><code class="language-plaintext highlighter-rouge">@Inherited</code>：描述注解是否被子类继承</li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">xyz.slienceme.annotation</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.annotation.*</span><span class="o">;</span>
<span class="cm">/**

 元注解：用于描述注解的注解
     * @Target：描述注解能够作用的位置
     * @Retention：描述注解被保留的阶段
     * @Documented：描述注解是否被抽取到api文档中
     * @Inherited：描述注解是否被子类继承
 *
 */</span>
<span class="nd">@Target</span><span class="o">({</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">TYPE</span><span class="o">,</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">METHOD</span><span class="o">,</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">FIELD</span><span class="o">})</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@Documented</span>
<span class="nd">@Inherited</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">MyAnno3</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div></div> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">xyz.slienceme.annotation</span><span class="o">;</span>
<span class="nd">@MyAnno</span><span class="o">(</span><span class="n">value</span><span class="o">=</span><span class="mi">12</span><span class="o">,</span><span class="n">per</span> <span class="o">=</span> <span class="nc">Person</span><span class="o">.</span><span class="na">P1</span><span class="o">,</span><span class="n">anno2</span> <span class="o">=</span> <span class="nd">@MyAnno2</span><span class="o">,</span><span class="n">strs</span><span class="o">=</span><span class="s">"bbb"</span><span class="o">)</span>
<span class="nd">@MyAnno3</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Worker</span> <span class="o">{</span>
    <span class="nd">@MyAnno3</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">"aaa"</span><span class="o">;</span>
    <span class="nd">@MyAnno3</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">show</span><span class="o">(){</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <hr /> <ul> <li>在程序使用(解析)注解：获取注解中定义的属性值 <ol> <li>获取注解定义的位置的对象 （<code class="language-plaintext highlighter-rouge">Class，Method,Field</code>）</li> <li>获取指定的注解</li> </ol> <ul> <li><code class="language-plaintext highlighter-rouge">getAnnotation(Class)</code> //其实就是在内存中生成了一个该注解接口的子类实现对象 <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProImpl</span> <span class="kd">implements</span> <span class="nc">Pro</span><span class="o">{</span>
              <span class="kd">public</span> <span class="nc">String</span> <span class="nf">className</span><span class="o">(){</span>
                  <span class="k">return</span> <span class="s">"xyz.slienceme.annotation.Demo1"</span><span class="o">;</span>
              <span class="o">}</span>
              <span class="kd">public</span> <span class="nc">String</span> <span class="nf">methodName</span><span class="o">(){</span>
                  <span class="k">return</span> <span class="s">"show"</span><span class="o">;</span>
              <span class="o">}</span>
          <span class="o">}</span>
</code></pre></div> </div> </li> </ul> </li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">xyz.slienceme.annotation</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>

<span class="cm">/**
 * 框架类
 */</span>


<span class="nd">@Pro</span><span class="o">(</span><span class="n">className</span> <span class="o">=</span> <span class="s">"xyz.slienceme.annotation.Demo1"</span><span class="o">,</span><span class="n">methodName</span> <span class="o">=</span> <span class="s">"show"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReflectTest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="cm">/*
            前提：不能改变该类的任何代码。可以创建任意类的对象，可以执行任意方法
         */</span>

        <span class="c1">//1.解析注解</span>
        <span class="c1">//1.1获取该类的字节码文件对象</span>
        <span class="nc">Class</span><span class="o">&lt;</span><span class="nc">ReflectTest</span><span class="o">&gt;</span> <span class="n">reflectTestClass</span> <span class="o">=</span> <span class="nc">ReflectTest</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
        <span class="c1">//2.获取上边的注解对象</span>
        <span class="c1">//其实就是在内存中生成了一个该注解接口的子类实现对象</span>
        <span class="cm">/*

            public class ProImpl implements Pro{
                public String className(){
                    return "xyz.slienceme.annotation.Demo1";
                }
                public String methodName(){
                    return "show";
                }

            }
 */</span>

        <span class="nc">Pro</span> <span class="n">an</span> <span class="o">=</span> <span class="n">reflectTestClass</span><span class="o">.</span><span class="na">getAnnotation</span><span class="o">(</span><span class="nc">Pro</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="c1">//3.调用注解对象中定义的抽象方法，获取返回值</span>
        <span class="nc">String</span> <span class="n">className</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="na">className</span><span class="o">();</span>
        <span class="nc">String</span> <span class="n">methodName</span> <span class="o">=</span> <span class="n">an</span><span class="o">.</span><span class="na">methodName</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">className</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">methodName</span><span class="o">);</span>

        <span class="c1">//3.加载该类进内存</span>
        <span class="nc">Class</span> <span class="n">cls</span> <span class="o">=</span> <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="n">className</span><span class="o">);</span>
        <span class="c1">//4.创建对象</span>
        <span class="nc">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="na">newInstance</span><span class="o">();</span>
        <span class="c1">//5.获取方法对象</span>
        <span class="nc">Method</span> <span class="n">method</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="n">methodName</span><span class="o">);</span>
        <span class="c1">//6.执行方法</span>
        <span class="n">method</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">obj</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div> <ol> <li> <p>调用注解中的抽象方法获取配置的属性值</p> <ul> <li>案例：简单的测试框架</li> <li>小结： <ol> <li>以后大多数时候，我们会使用注解，而不是自定义注解</li> <li>注解给谁用？ <ol> <li>编译器</li> <li>给解析程序用</li> </ol> </li> <li>注解不是程序的一部分，可以理解为注解就是一个标签</li> </ol> </li> </ul> </li> </ol> <div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"> <h3>文档信息</h3> <ul> <li>本文作者：<a href="https://blog.slienceme.cn" target="_blank">slience_me</a></li> <li>本文链接：<a href="https://blog.slienceme.cn/2021/06/25/Java%E8%AF%AD%E8%A8%80%E9%AB%98%E7%BA%A7-%E7%AC%AC%E5%85%AD%E9%83%A8%E5%88%86-Junit&%E5%8F%8D%E5%B0%84&%E6%B3%A8%E8%A7%A3/" target="_blank">https://blog.slienceme.cn/2021/06/25/Java%E8%AF%AD%E8%A8%80%E9%AB%98%E7%BA%A7-%E7%AC%AC%E5%85%AD%E9%83%A8%E5%88%86-Junit&%E5%8F%8D%E5%B0%84&%E6%B3%A8%E8%A7%A3/</a></li> <li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">创意共享3.0许可证</a>）</li> </ul> </div> </article> <div class="share"> <div class="share-component" data-disabled='qq,facebook'></div> </div> <div class="comment"> <script src="https://giscus.app/client.js" data-repo="slience-me/blog-comments" data-repo-id="R_kgDOKr27jA" data-category="Announcements" data-category-id="DIC_kwDOKr27jM4CnWMe" data-mapping="title" data-strict="1" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" async> </script> </div> </div> <div class="column one-fourth"> <h3>Search</h3> <div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"> </div> <ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul> <script src="https://blog.slienceme.cn/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: 'https://blog.slienceme.cn/assets/search_data.json?v=1740641698', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: 'No results found', limit: 10, fuzzy: false, exclude: ['Welcome'] }) </script> <h3 class="post-directory-title mobile-hidden">Table of Contents</h3> <div id="post-directory-module" class="mobile-hidden"> <section class="post-directory"> <dl></dl> </section> </div> <script src="https://blog.slienceme.cn/assets/js/jquery.toc.js"></script> </div> </div> </section> <footer class="container"> <div class="site-footer" role="contentinfo"> <div class="copyright left mobile-block"> Copyright@ 2019-2025 slience_me 版权所有&emsp; <img src="/images/logo/logo.png" class="w-full" style="width: 12px;"> <a href="https://beian.mps.gov.cn/#/query/webSearch?code=13102202000626" rel="noreferrer" target="_blank">冀公网安备13102202000626</a>&emsp; <a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank" rel="noreferrer">津ICP备2024026565号-1</a> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a> </div> <ul class="site-footer-links right mobile-hidden"> <li> <a href="javascript:window.scrollTo(0,0)" >TOP</a> </li> </ul> <br/> <script defer src="https://vercount.one/js"></script> <div class="mobile-hidden" style="margin-top:8px"> <span id="busuanzi_container_site_pv" style="display:none"> 本站访问量<span id="busuanzi_value_site_pv"></span>次 </span> <span id="busuanzi_container_site_uv" style="display:none"> / 本站访客数<span id="busuanzi_value_site_uv"></span>人 </span> <span id="busuanzi_container_page_pv" style="display:none"> / 本页访问量<span id="busuanzi_value_page_pv"></span>次 / 统计始于2024-12-01 </span> </div> </div> </footer> <div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a> </div> <script src="https://blog.slienceme.cn/assets/vendor/share.js/dist/js/share.min.js"></script> <script src="https://blog.slienceme.cn/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script> </body> </html>
